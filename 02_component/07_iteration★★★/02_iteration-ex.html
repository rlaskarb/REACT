<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ㄷㅌㅌ</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script> <!-- react cdn링크-->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script> <!-- babel 링크크-->
    <script src="https://unpkg.com/prop-types@15.8.1/prop-types.js"></script>
</head>
<body>

    <div id="root"></div>
    <script type="text/babel">
        // 상태값 관리를 위한 useState 사용준비
        const {useState} =React;

        function App(){

        // 회원 목록 상태
        const[users ,setUsers] = useState([
            {id: 1, name: '푸'},
            {id: 2, name: '퐛'},
            {id: 3, name: '퐁'},
            {id: 4, name: '쿼'},
            {id: 5, name: '리'},
        ]);


            const [text,setText] = useState('');

            //id 증가 상태(key 중복을 막기 위해 지금 상황에서만 사용(DB연동이 안되어서))

            const [nextId , setNextId] = useState(6);

            const  onChangeHandler = (e) => setText(e.target.value);


            const onClickHandler = () =>{
            //concat : 기존배열을 바꾸지 않고 합친결과 반환.
                const changeUsers = users.concat({
                    id: nextId,
                    name: text // 우리가 input 입력한 값
                });


                //key 중복 막기 위해 더해줌
                setNextId(nextId+1);
                setUsers(changeUsers);
                setText('');

            }

            const onRemove = (id) =>{
                /*
                    배열의 필터 filter
                        배열명.filter(callback)
                        기존 배열에서 callback 함수를 각 요소마다 실행하고 
                        true 를 반환하는 요소들로 배열을 다시 정의한다.
                */

                const filterUsers = users.filter(user => user.id !== id);

                // 더블클릭을 제외한 li 를 만들어서 set 수정
                setUsers(filterUsers);
            }


            //userList 화면에 보내기
            const userList = users.map(user =><li key={user.id} onDoubleClick={()=> onRemove(user.id)} >{user.name}</li>);







            return(
                 <>
                <input 
                    type="text"
                    value={text}
                    onChange={onChangeHandler}
                    />
                <button
                    onClick={onClickHandler}                
                    >
                    추가
                </button>
                
                <ul>
                    {userList}
                </ul>
                </>
            );



     }


        
        ReactDOM.createRoot(document.getElementById('root'))
                .render(<App/>);



    </script>
    
</body>
</html>