<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01_redux-intro</title>
    <script src="https://unpkg.com/redux@4.2.0/dist/redux.js"></script>
</head>
<body>
    <script>
        /*
            리덕스란? 파편화 되어 있는 State 를 관리하기 위한 라이브러리 이다.
            앱의 상태는 전부 하나의 store(저장소) 안에 저장이 된다.
            저장소에 있는 state 를 변경하기 위한 유일한 방법은 어떤식으로
            state를 변경할 지에 대한 action(행위)이다.
            전달받은 action 에 따라 state 를 어떻게 변경할 지를 정의하는 함수를
            reducer 함수 라고 한다.

            3개지 원칙

            1. 스토어라는 하나뿐인 데이터 공간을 이용하기 때문에 신뢰할 수 있는 데이터이다.
            2. state 는 리덕스에서 액션을 전달하는 리듀서 함수를 통해서만 변경할 수 있으며, 직접변경은 못한다.
            3. 변경은 오로지 순수 함수로만 가능하다.
        */


        console.log('Redux',window.Redux);

        const { createStore } = Redux;

        // reducer  함수는 초기값 (state)  와 행위(action) 을 전달 받는다.
        function reducer(state=0,action){

            /* 
                action 은 스토어에 운반할 데이터를 말하며 주문서의 개념이다.
                (~~ 해줘!!!!)
                action 의 값 설정은 자유지만, type-payload 로 반드시 하자
                {
                    type : 'Action_Name',  // 필수
                    payload : {name : '김남규' , age : 37} // 옵션션
                }
            */
            switch(action.type){
                case 'INCREMENT' :
                return state +1;

                case 'DECREMENT' :
                return state -1;

                default:
                return state;
            }


            
        }

        //저장소 만들건데 리듀서를 곁들인..
        //store 가 제공하는 API 는 
        const store = createStore(reducer);

        console.log(store);

        /*스토어의 상태변화를 구독한다.*/

        store.subscribe(()=>console.log(store.getState()) );

        store.dispatch({type:'INCREMENT'});
        store.dispatch({type:'INCREMENT'});
        store.dispatch({type:'DECREMENT'});

    </script>
</body>
</html>